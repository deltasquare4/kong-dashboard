<div class="container">
    <h3 class="header">{{mode==='create' ? 'Add plugin' : 'Edit plugin'}}</h3>

    <div class="row">
        <div class="col s5">
            <div class="card-panel teal">
                <p class="white-text">
                    When adding a Plugin on top of an API, every request made by a client will be evaluated by
                    the Plugin's configuration you setup
                </p>
                <p class="white-text">
                    You can checkout the kong documentation to see the <a href="https://getkong.org/plugins/" target="_blank">
                    list of available plugins</a>, as well as their configuration settings.
                </p>
            </div>
        </div>
        <form name="addPlugin" class="col s7" novalidate ng-submit="save()">
            <object-properties
                schema="schema"
                object="plugin"
                errors="errors"
                ></object-properties>
            <div class="row">
                <div class="input-field col s11">
                    <label class="active">Service</label>
                    <select materialize-select required
                           ng-if="services"
                           ng-model="$parent.service"
                           ng-options="service.id as service.name for service in services"
                           >
                           <option value="" selected>Choose option</option>
                    </select>
                    <app-field-error error="error.services"></app-field-error>
                </div>
                <div class="input-field col s11">
                    <label class="active">Route</label>
                    <select materialize-select required
                           ng-if="routes"
                           ng-model="$parent.route"
                           >
                           <option value="" selected>Choose option</option>
                           <option ng-repeat="route in routes" value="{{route.id}}">Methods: {{route.methods}}, Protocols: {{route.protocols}}, Hosts: {{route.hosts}}, Paths: {{route.paths}}</option>
                    </select>
                    <app-field-error error="error.routes"></app-field-error>
                </div>
                <div class="input-field col s12" ng-show="plugin_schema_loaded">
                    <button type="submit" class="waves-effect waves-light btn right">
                        {{mode === 'create' ? "Create" : "Edit"}}
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
